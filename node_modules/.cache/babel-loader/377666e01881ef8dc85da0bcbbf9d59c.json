{"ast":null,"code":"import _defineProperty from \"/Users/jwleong/final-frontend/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/jwleong/final-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jwleong/final-frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/jwleong/final-frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jwleong/final-frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/jwleong/final-frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/jwleong/final-frontend/src/containers/SignupModal.js\";\nimport React from 'react';\nimport { Button, UncontrolledAlert, FormGroup, FormText, Input, Modal, ModalHeader, ModalBody, ModalFooter, Label, Form } from 'reactstrap';\nimport axios from 'axios';\n\nvar SignupModal =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(SignupModal, _React$Component);\n\n  function SignupModal() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, SignupModal);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(SignupModal)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      username: '',\n      email: '',\n      password: '',\n      userValid: false,\n      emailValid: false,\n      passwordValid: false,\n      formValid: false,\n      hasErrors: false,\n      errors: [],\n      isLogin: false,\n      success: []\n    };\n\n    _this.handleInput = function (event) {\n      var name = event.target.name;\n      var value = event.target.value;\n\n      _this.setState(_defineProperty({}, name, value), function () {\n        _this.validField(name, value);\n      });\n    };\n\n    _this.handleSignup = function (event) {\n      event.preventDefault();\n      axios({\n        method: 'post',\n        url: 'https://photofy.herokuapp.com/api/v1/users/new',\n        data: {\n          username: _this.state.username,\n          email: _this.state.email,\n          password: _this.state.password\n        }\n      }).then(function (response) {\n        // debugger\n        console.log(response);\n        localStorage.setItem('me', JSON.stringify(response.data));\n        setTimeout(_this.props.toggle, 1000);\n        ;\n\n        _this.setState({\n          isLogin: true,\n          success: response.data.message\n        });\n      }).catch(function (error) {\n        // debugger\n        _this.setState({\n          hasErrors: true,\n          errors: error.data.message\n        });\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(SignupModal, [{\n    key: \"validField\",\n    value: function validField(fieldName, value) {\n      var userValid = this.state.userValid;\n      var emailValid = this.state.emailValid;\n      var passwordValid = this.state.passwordValid;\n\n      switch (fieldName) {\n        case 'username':\n          userValid = value.length >= 3;\n          break;\n\n        case 'email':\n          emailValid = value.match(/^([\\w.%+-]+)@([\\w-]+\\.)+([\\w]{2,})$/i);\n          break;\n\n        case 'password':\n          passwordValid = value.length >= 8;\n          break;\n\n        default:\n          break;\n      }\n\n      this.setState({\n        userValid: userValid,\n        emailValid: emailValid,\n        passwordValid: passwordValid\n      }, this.validForm);\n    }\n  }, {\n    key: \"validForm\",\n    value: function validForm() {\n      this.setState({\n        formValid: this.state.emailValid && this.state.passwordValid && this.state.userValid\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          signup = _this$props.signup,\n          showModal = _this$props.showModal,\n          toggle = _this$props.toggle;\n      var closeBtn = React.createElement(\"button\", {\n        className: \"close\",\n        onClick: toggle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, \"\\xD7\");\n      return React.createElement(React.Fragment, null, React.createElement(Modal, {\n        isOpen: showModal,\n        toggle: toggle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, React.createElement(ModalHeader, {\n        toggle: toggle,\n        close: closeBtn,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, \"Sign Up for Photofy\"), this.state.isLogin ? React.createElement(UncontrolledAlert, {\n        color: \"info\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, this.state.success) : null, React.createElement(ModalBody, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, React.createElement(Form, {\n        onSubmit: this.handleSignup,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, this.state.hasErrors ? React.createElement(UncontrolledAlert, {\n        color: \"danger\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, this.state.errors) : null, React.createElement(Input, {\n        type: \"name\",\n        name: \"username\",\n        onChange: this.handleInput,\n        placeholder: \"Username\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      })), React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, React.createElement(Input, {\n        type: \"email\",\n        name: \"email\",\n        onChange: this.handleInput,\n        placeholder: \"Email\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      })), React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, React.createElement(Input, {\n        type: \"password\",\n        name: \"password\",\n        onChange: this.handleInput,\n        placeholder: \"Password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      })), !this.state.formValid ? React.createElement(\"small\", {\n        className: \"text-muted\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, \"* All fields are required\") : null, React.createElement(Button, {\n        color: \"primary\",\n        block: true,\n        disabled: !this.state.formValid,\n        onClick: this.handleSignup,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, \"Sign Up\"), React.createElement(FormText, {\n        color: \"muted\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, \"By tapping Sign Up, you agree to our Terms of Service and Privacy Policy\"))), React.createElement(ModalFooter, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, React.createElement(Label, {\n        for: \"exampleEmail\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, \"Already sign up? Login now!\"), React.createElement(Button, {\n        color: \"secondary\",\n        onClick: signup,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, \"Login\"))));\n    }\n  }]);\n\n  return SignupModal;\n}(React.Component);\n\nexport { SignupModal as default };","map":{"version":3,"sources":["/Users/jwleong/final-frontend/src/containers/SignupModal.js"],"names":["React","Button","UncontrolledAlert","FormGroup","FormText","Input","Modal","ModalHeader","ModalBody","ModalFooter","Label","Form","axios","SignupModal","state","username","email","password","userValid","emailValid","passwordValid","formValid","hasErrors","errors","isLogin","success","handleInput","event","name","target","value","setState","validField","handleSignup","preventDefault","method","url","data","then","response","console","log","localStorage","setItem","JSON","stringify","setTimeout","props","toggle","message","catch","error","fieldName","length","match","validForm","signup","showModal","closeBtn","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Button, UncontrolledAlert, FormGroup, FormText, Input, Modal, ModalHeader, ModalBody, ModalFooter, Label, Form } from 'reactstrap';\nimport axios from 'axios';\n\nexport default class SignupModal extends React.Component {\n    state = {\n        username: '',\n        email: '',\n        password: '',\n        userValid: false,\n        emailValid: false,\n        passwordValid: false,\n        formValid: false,\n        hasErrors: false,\n        errors: [],\n        isLogin: false,\n        success: []\n    }\n    \n    handleInput=(event)=> {\n        const name = event.target.name;\n        const value = event.target.value;\n        this.setState({ [name]: value },\n            () => {this.validField(name,value)});\n    }\n\n    handleSignup=(event)=> {\n        event.preventDefault();\n\n        axios({\n            method: 'post',\n            url: 'https://photofy.herokuapp.com/api/v1/users/new',\n            data: { \n                username: this.state.username,\n                email : this.state.email,\n                password: this.state.password\n            }\n        })\n        .then(response => {\n            // debugger\n            console.log(response);\n            localStorage.setItem('me', JSON.stringify(response.data));\n            setTimeout(this.props.toggle,1000);;\n            this.setState({\n                isLogin : true,\n                success : response.data.message,\n            })\n        })\n        .catch(error => {\n            // debugger\n            this.setState({\n                hasErrors : true,\n                errors : error.data.message,\n            })\n        })\n    }\n\n    validField(fieldName,value) {\n        let userValid = this.state.userValid;\n        let emailValid = this.state.emailValid;\n        let passwordValid = this.state.passwordValid;\n\n        switch(fieldName) {\n            case 'username':\n            userValid = value.length >= 3;\n            break;\n            case 'email':\n            emailValid = value.match(/^([\\w.%+-]+)@([\\w-]+\\.)+([\\w]{2,})$/i);\n            break;\n            case 'password':\n            passwordValid = value.length >= 8;\n            break;\n            default:\n            break;\n        }\n        this.setState({ userValid: userValid,\n                        emailValid: emailValid,\n                        passwordValid: passwordValid\n                        }, this.validForm);\n    }\n\n    validForm() {\n        this.setState({formValid: this.state.emailValid && this.state.passwordValid && this.state.userValid});\n    }\n    \n    render() {\n        const {signup,showModal,toggle} = this.props\n        const closeBtn = <button className=\"close\" onClick={toggle}>&times;</button>;\n        return (\n        <>\n            <Modal isOpen={showModal} toggle={toggle}>\n                <ModalHeader toggle={toggle} close={closeBtn}>Sign Up for Photofy</ModalHeader>\n                { this.state.isLogin ? <UncontrolledAlert color=\"info\">{this.state.success}</UncontrolledAlert> : null }                \n                <ModalBody>\n                    <Form onSubmit={this.handleSignup}>\n                    <FormGroup>\n                    { this.state.hasErrors ? <UncontrolledAlert color=\"danger\">{this.state.errors}</UncontrolledAlert> : null }\n                        <Input type=\"name\" name=\"username\" onChange={this.handleInput} placeholder=\"Username\" />\n                    </FormGroup>\n                    <FormGroup>\n                        <Input type=\"email\" name=\"email\" onChange={this.handleInput} placeholder=\"Email\" />\n                    </FormGroup>\n                    <FormGroup>\n                        <Input type=\"password\" name=\"password\" onChange={this.handleInput} placeholder=\"Password\" />\n                    </FormGroup>\n                    { !this.state.formValid ? <small className='text-muted'>* All fields are required</small> : null}\n                    <Button color=\"primary\" block disabled={!this.state.formValid} onClick={this.handleSignup} >Sign Up</Button>\n                    <FormText color=\"muted\">By tapping Sign Up, you agree to our Terms of Service and Privacy Policy</FormText>\n                    </Form>\n                </ModalBody>\n                <ModalFooter>\n                    <Label for=\"exampleEmail\">Already sign up? Login now!</Label>\n                    <Button color=\"secondary\" onClick={signup}>Login</Button>\n                </ModalFooter>\n            </Modal>\n        </>\n        );\n    }\n}"]},"metadata":{},"sourceType":"module"}