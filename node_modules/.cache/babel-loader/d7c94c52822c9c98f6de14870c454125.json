{"ast":null,"code":"import _defineProperty from \"/Users/jwleong/final-frontend/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/jwleong/final-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jwleong/final-frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/jwleong/final-frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jwleong/final-frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/jwleong/final-frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/jwleong/final-frontend/src/containers/SettingModal.js\";\nimport React from 'react';\nimport { Button, UncontrolledAlert, FormGroup, Input, Modal, ModalHeader, ModalBody, Label } from 'reactstrap';\nimport axios from 'axios';\n\nvar SettingModal =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(SettingModal, _React$Component);\n\n  function SettingModal() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, SettingModal);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(SettingModal)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      username: '',\n      password: '',\n      errors: [],\n      success: [],\n      hasErrors: false,\n      isEdit: false,\n      isDelete: false,\n      user: ''\n    };\n\n    _this.handleForm = function (event) {\n      var name = event.target.name;\n      var value = event.target.value;\n\n      _this.setState(_defineProperty({}, name, value));\n    };\n\n    _this.handleEdit = function (event) {\n      event.preventDefault();\n      var user = JSON.parse(localStorage.me);\n      axios({\n        method: 'post',\n        url: \"https://photofy.herokuapp.com/api/v1/users/edit/\".concat(user.user.id),\n        data: {\n          password: _this.state.password,\n          username: _this.state.username\n        },\n        headers: {\n          Authorization: \"Bearer \".concat(user.auth_token)\n        }\n      }).then(function (response) {\n        console.log(response);\n        setTimeout(_this.props.editModal, 1000);\n\n        _this.setState({\n          isEdit: true,\n          success: response.data.message\n        });\n      }).catch(function (error) {\n        _this.setState({\n          hasErrors: true,\n          errors: error.data.message\n        });\n      });\n    };\n\n    _this.handleDelete = function (event) {\n      event.preventDefault();\n      var user = JSON.parse(localStorage.me);\n      axios({\n        method: 'post',\n        url: 'https://photofy.herokuapp.com/api/v1/users/delete',\n        headers: {\n          Authorization: \"Bearer \".concat(user.auth_token)\n        }\n      }).then(function (response) {\n        console.log(response);\n        setTimeout(_this.props.editModal, 1000);\n\n        _this.setState({\n          isDelete: true,\n          success: response.data.message\n        });\n      }).catch(function (error) {\n        _this.setState({\n          hasErrors: true,\n          errors: error.data.message\n        });\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(SettingModal, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var user = JSON.parse(localStorage.me);\n      axios({\n        method: 'get',\n        url: 'http://localhost:5000/api/v1/users/me',\n        headers: {\n          Authorization: \"Bearer \".concat(user.auth_token)\n        }\n      }).then(function (result) {\n        _this2.setState({\n          user: result.data\n        });\n      }).catch(function (error) {\n        console.log('ERROR: ', error);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var user = this.state.user;\n      var _this$props = this.props,\n          edit = _this$props.edit,\n          editModal = _this$props.editModal;\n      var closeBtn = React.createElement(\"button\", {\n        className: \"close\",\n        onClick: editModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, \"\\xD7\");\n      return React.createElement(React.Fragment, null, React.createElement(Modal, {\n        isOpen: edit,\n        toggle: editModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, React.createElement(ModalHeader, {\n        toggle: editModal,\n        close: closeBtn,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, \"Setting\"), this.state.isEdit ? React.createElement(UncontrolledAlert, {\n        color: \"info\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, this.state.success) : null, this.state.isDelete ? React.createElement(UncontrolledAlert, {\n        color: \"info\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, this.state.success) : null, React.createElement(ModalBody, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, this.state.hasErrors ? React.createElement(UncontrolledAlert, {\n        color: \"danger\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, this.state.errors) : null, React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, React.createElement(Label, {\n        for: \"username\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, \"New Username\"), React.createElement(Input, {\n        type: \"username\",\n        name: \"username\",\n        onChange: this.handleForm,\n        defaultValue: user.username,\n        placeholder: \"Username\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }), React.createElement(Label, {\n        for: \"password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, \"New Password\"), React.createElement(Input, {\n        type: \"password\",\n        name: \"password\",\n        onChange: this.handleForm,\n        placeholder: \"Password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }), React.createElement(Button, {\n        style: {\n          display: 'block',\n          width: '100%',\n          margin: '5px 0'\n        },\n        color: \"primary\",\n        onClick: this.handleEdit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, \"Edit\")), React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, React.createElement(Label, {\n        for: \"delete\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, \"Want to delete your account?\"), React.createElement(Button, {\n        color: \"danger\",\n        onClick: this.handleDelete,\n        style: {\n          display: 'block',\n          width: '100%',\n          margin: '5px 0'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, \"Delete\")))));\n    }\n  }]);\n\n  return SettingModal;\n}(React.Component);\n\nexport { SettingModal as default };","map":{"version":3,"sources":["/Users/jwleong/final-frontend/src/containers/SettingModal.js"],"names":["React","Button","UncontrolledAlert","FormGroup","Input","Modal","ModalHeader","ModalBody","Label","axios","SettingModal","state","username","password","errors","success","hasErrors","isEdit","isDelete","user","handleForm","event","name","target","value","setState","handleEdit","preventDefault","JSON","parse","localStorage","me","method","url","id","data","headers","Authorization","auth_token","then","response","console","log","setTimeout","props","editModal","message","catch","error","handleDelete","result","edit","closeBtn","display","width","margin","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Button, UncontrolledAlert, FormGroup, Input, Modal, ModalHeader, ModalBody, Label } from 'reactstrap';\nimport axios from 'axios';\n\nexport default class SettingModal extends React.Component {\n    state = {\n        username: '',\n        password: '',\n        errors: [],\n        success: [],\n        hasErrors: false,\n        isEdit:false,\n        isDelete:false,\n        user:''\n    }\n\n    componentDidMount() {\n        const user = JSON.parse(localStorage.me)\n        axios({\n            method: 'get',\n            url: 'http://localhost:5000/api/v1/users/me',\n            headers: { \n                Authorization: `Bearer ${user.auth_token}`\n            },\n        })\n        .then(result => {\n            this.setState({\n              user : result.data,\n            });\n        })\n        .catch(error => {\n            console.log('ERROR: ', error)\n        })\n    }\n\n    handleForm=(event)=> {\n        const name = event.target.name;\n        const value = event.target.value;\n        this.setState({ [name]: value });\n    }\n\n    handleEdit=(event)=>{\n        event.preventDefault();\n        const user = JSON.parse(localStorage.me)\n        axios({\n            method: 'post',\n            url: `https://photofy.herokuapp.com/api/v1/users/edit/${user.user.id}`,\n            data: { \n                password : this.state.password,\n                username : this.state.username,\n            }, \n            headers: { \n                Authorization: `Bearer ${user.auth_token}`\n            },\n        })\n        .then(response => {\n            console.log(response);\n            setTimeout(this.props.editModal,1000);\n            this.setState({\n                isEdit : true,\n                success : response.data.message,\n            })\n            \n        })\n        .catch(error => {\n            this.setState({\n                hasErrors : true,\n                errors : error.data.message,\n            })\n        })\n    }\n\n    handleDelete=(event)=>{\n        event.preventDefault();\n        const user = JSON.parse(localStorage.me)\n        axios({\n            method: 'post',\n            url: 'https://photofy.herokuapp.com/api/v1/users/delete', \n            headers: { \n                Authorization: `Bearer ${user.auth_token}`\n            }, \n        })\n        .then(response => {\n            console.log(response);\n            setTimeout(this.props.editModal,1000);\n            this.setState({\n                isDelete : true,\n                success : response.data.message,\n            })\n            \n        })\n        .catch(error => {\n            this.setState({\n                hasErrors : true,\n                errors : error.data.message,\n            })\n        })\n    }\n\n    render() {\n        const {user} = this.state\n        const {edit,editModal} = this.props\n        const closeBtn = <button className=\"close\" onClick={editModal}>&times;</button>;\n        return (\n        <>\n            <Modal isOpen={edit} toggle={editModal}>\n                <ModalHeader toggle={editModal} close={closeBtn}>Setting</ModalHeader>\n                { this.state.isEdit ? <UncontrolledAlert color=\"info\">{this.state.success}</UncontrolledAlert> : null }                \n                { this.state.isDelete ? <UncontrolledAlert color=\"info\">{this.state.success}</UncontrolledAlert> : null }                                \n                <ModalBody>\n                    { this.state.hasErrors ? <UncontrolledAlert color=\"danger\">{this.state.errors}</UncontrolledAlert> : null }\n                    <FormGroup>\n                        <Label for=\"username\">New Username</Label>\n                        <Input type=\"username\" name=\"username\" onChange={this.handleForm} defaultValue={user.username} placeholder=\"Username\" />\n                        <Label for=\"password\">New Password</Label>\n                        <Input type=\"password\" name=\"password\" onChange={this.handleForm} placeholder=\"Password\" />\n                        <Button style={{display:'block',width:'100%',margin:'5px 0'}} color=\"primary\" onClick={this.handleEdit} >Edit</Button>                  \n                    </FormGroup>\n                    <FormGroup>\n                        <Label for=\"delete\">Want to delete your account?</Label>\n                        <Button color=\"danger\" onClick={this.handleDelete} style={{display:'block',width:'100%',margin:'5px 0'}}>Delete</Button>                  \n                    </FormGroup>\n                </ModalBody>\n            </Modal>\n        </>\n        );\n    }\n}"]},"metadata":{},"sourceType":"module"}