{"ast":null,"code":"import _classCallCheck from \"/Users/jwleong/final-backend/react-front/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jwleong/final-backend/react-front/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/jwleong/final-backend/react-front/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jwleong/final-backend/react-front/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/jwleong/final-backend/react-front/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/jwleong/final-backend/react-front/src/pages/VideoPage.js\";\nimport React from 'react';\nimport MediaHandler from '../components/MediaHandler';\n\nvar VideoPage =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(VideoPage, _React$Component);\n\n  function VideoPage() {\n    var _this;\n\n    _classCallCheck(this, VideoPage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(VideoPage).call(this));\n\n    _this.takePicture = function () {\n      var _this$state = _this.state,\n          width = _this$state.width,\n          height = _this$state.height; // Create canvas\n\n      var canvas = document.querySelector('canvas');\n      var video = document.querySelector('video');\n      var photos = document.getElementById('photos');\n      var context = canvas.getContext('2d'); // if(width && height) {\n      // set canvas props\n\n      canvas.width = width;\n      canvas.height = height; // Draw an image of the video on the canvas\n\n      context.drawImage(video, 0, 0, width, height);\n      var data = canvas.toDataURL('image/png').replace(\"image/png\", \"image/octet-stream\");\n      console.log(data); // photos.setAttribute('src', data);\n      // Create image from the canvas\n      // const imgUrl = canvas.toDataURL('image/png');\n      // Create img element\n\n      var img = document.createElement('img'); // Set img src\n\n      img.setAttribute('src', data); // Set image filter\n      // img.style.filter = filter;\n      // Add image to photos\n\n      photos.appendChild(img);\n      console.log('click'); // }\n    };\n\n    _this.state = {\n      // constraints: { audio: false, video: { width: 400, height: 300 } },\n      filter: null,\n      width: 400,\n      height: 300\n    };\n    _this.user = JSON.parse(localStorage.me).user;\n    _this.mediaHandler = new MediaHandler();\n    return _this;\n  }\n\n  _createClass(VideoPage, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.mediaHandler.getPermissions().then(function (stream) {\n        var video = document.querySelector('video');\n        video.srcObject = stream;\n        video.play();\n      }).catch(function (err) {\n        console.log(\"Error: \".concat(err));\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n        className: \"top-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, React.createElement(\"video\", {\n        className: \"my-video\",\n        ref: function ref(_ref) {\n          _this2.myVideo = _ref;\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, \"Stream not available...\"), React.createElement(\"button\", {\n        id: \"photo-button\",\n        className: \"btn btn-dark\",\n        ref: function ref(_ref2) {\n          _this2.photoButton = _ref2;\n        },\n        onClick: this.takePicture,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, \"Take Photo\"), React.createElement(\"select\", {\n        id: \"photo-filter\",\n        className: \"select\",\n        ref: function ref(_ref3) {\n          _this2.photoFilter = _ref3;\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"none\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, \"Normal\"), React.createElement(\"option\", {\n        value: \"grayscale(100%)\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, \"Grayscale\"), React.createElement(\"option\", {\n        value: \"sepia(100%)\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, \"Sepia\"), React.createElement(\"option\", {\n        value: \"invert(100%)\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, \"Invert\"), React.createElement(\"option\", {\n        value: \"hue-rotate(90deg)\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, \"Hue\"), React.createElement(\"option\", {\n        value: \"blur(10px)\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, \"Blur\"), React.createElement(\"option\", {\n        value: \"contrast(200%)\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, \"Contrast\")), React.createElement(\"button\", {\n        id: \"clear-button\",\n        className: \"btn btn-light\",\n        ref: function ref(_ref4) {\n          _this2.clearButton = _ref4;\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, \"Clear\"), React.createElement(\"canvas\", {\n        id: \"canvas\",\n        ref: function ref(_ref5) {\n          _this2.canvas = _ref5;\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"bottom-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"photos\",\n        ref: function ref(_ref6) {\n          _this2.photos = _ref6;\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return VideoPage;\n}(React.Component);\n\nexport { VideoPage as default };","map":{"version":3,"sources":["/Users/jwleong/final-backend/react-front/src/pages/VideoPage.js"],"names":["React","MediaHandler","VideoPage","takePicture","state","width","height","canvas","document","querySelector","video","photos","getElementById","context","getContext","drawImage","data","toDataURL","replace","console","log","img","createElement","setAttribute","appendChild","filter","user","JSON","parse","localStorage","me","mediaHandler","getPermissions","then","stream","srcObject","play","catch","err","ref","myVideo","photoButton","photoFilter","clearButton","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport MediaHandler from '../components/MediaHandler';\n\n\nexport default class VideoPage extends React.Component {\n    constructor() { \n        super();\n        this.state = {\n            // constraints: { audio: false, video: { width: 400, height: 300 } },\n            filter: null,\n            width:400,\n            height:300\n        }\n        this.user = JSON.parse(localStorage.me).user;\n      \n        this.mediaHandler = new MediaHandler();\n        \n    }\n   \n    componentWillMount(){\n        this.mediaHandler.getPermissions()\n        .then(stream => {\n            const video = document.querySelector('video');            \n            video.srcObject = stream;\n            video.play();\n        })\n        .catch(function(err) {\n            console.log(`Error: ${err}`);\n        });\n    }\n\n    takePicture = () => {\n        const { width,height} = this.state\n        // Create canvas\n        const canvas = document.querySelector('canvas');\n        const video = document.querySelector('video');  \n        const photos = document.getElementById('photos');          \n        const context = canvas.getContext('2d');\n        // if(width && height) {\n          // set canvas props\n        canvas.width = width;\n        canvas.height = height;\n        // Draw an image of the video on the canvas\n        context.drawImage(video, 0, 0, width, height);\n        const data = canvas.toDataURL('image/png').replace(\"image/png\", \"image/octet-stream\");\n        console.log(data)\n        // photos.setAttribute('src', data);\n        // Create image from the canvas\n        // const imgUrl = canvas.toDataURL('image/png');\n\n        // Create img element\n        const img = document.createElement('img');\n\n        // Set img src\n        img.setAttribute('src', data);\n\n        // Set image filter\n        // img.style.filter = filter;\n\n        // Add image to photos\n        photos.appendChild(img);\n        console.log('click')\n        // }\n      }\n  \n\n    render() {\n        return (\n            <>\n                <div className=\"top-container\">\n                    <video className=\"my-video\" ref={(ref) =>{this.myVideo = ref;}}>Stream not available...</video> \n                    <button id=\"photo-button\" className=\"btn btn-dark\" ref={(ref) =>{this.photoButton = ref;}} onClick={this.takePicture}>\n                    Take Photo\n                    </button>\n                    <select id=\"photo-filter\" className=\"select\" ref={(ref) =>{this.photoFilter = ref;}}>\n                    <option value=\"none\">Normal</option>\n                    <option value=\"grayscale(100%)\">Grayscale</option>\n                    <option value=\"sepia(100%)\">Sepia</option>\n                    <option value=\"invert(100%)\">Invert</option>\n                    <option value=\"hue-rotate(90deg)\">Hue</option>\n                    <option value=\"blur(10px)\">Blur</option>\n                    <option value=\"contrast(200%)\">Contrast</option>\n                    </select>\n                    <button id=\"clear-button\" className=\"btn btn-light\" ref={(ref) =>{this.clearButton = ref;}}>Clear</button>\n                    <canvas id=\"canvas\" ref={(ref) =>{this.canvas = ref;}}></canvas>\n                </div>\n                <div className=\"bottom-container\">\n                    <div id=\"photos\" ref={(ref) =>{this.photos = ref;}}></div>\n                </div>\n            </>\n        );\n    }\n}\n\n"]},"metadata":{},"sourceType":"module"}